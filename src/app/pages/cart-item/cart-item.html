<div
  class="bg-white border border-slate-100 rounded-2xl p-4 flex gap-4 items-center transition-all hover:shadow-md"
>
  <div class="w-20 h-20 bg-slate-50 rounded-xl flex-shrink-0 border border-slate-100">
    <img [src]="item().image" [alt]="item().title" class="w-full h-full object-contain p-2" />
  </div>

  <div class="flex flex-col flex-1 min-w-0">
    <span class="text-sm font-bold text-slate-900 truncate">{{ item().title }}</span>

    <div class="mt-1 flex flex-col">
      @if (item().discountPercentage! > 0) {
        <span class="text-[10px] text-slate-400 line-through">
          {{ item().price | currency }}
        </span>
        <span class="text-base font-black text-blue-600">
          {{ item().finalPrice | currency }}
        </span>
      } @else {
        <span class="text-base font-black text-slate-900">
          {{ item().price | currency }}
        </span>
      }
    </div>
  </div>

  <div class="flex flex-col items-center gap-1">
    <span class="text-[9px] font-bold uppercase text-slate-400 tracking-wider">Cantidad</span>

    <div class="flex items-center bg-slate-50 border border-slate-200 rounded-lg p-1">
      <button
        type="button"
        (click)="
          inputQuantity.value = (+inputQuantity.value - 1).toString();
          onQuantityChange(item().id, inputQuantity.value)
        "
        [disabled]="+inputQuantity.value <= 1"
        class="w-7 h-7 flex items-center justify-center bg-white rounded-md shadow-sm disabled:opacity-30 disabled:cursor-not-allowed active:scale-90 transition-all text-slate-600 font-bold"
      >
        -
      </button>

      <input
        #inputQuantity
        type="number"
        min="1"
        [max]="item().stock"
        value="1"
        readonly
        class="w-8 text-center bg-transparent border-none text-sm font-bold text-slate-800 focus:ring-0 cursor-default"
        (change)="onQuantityChange(item().id, inputQuantity.value)"
      />

      <button
        type="button"
        (click)="
          inputQuantity.value = (+inputQuantity.value + 1).toString();
          onQuantityChange(item().id, inputQuantity.value)
        "
        [disabled]="+inputQuantity.value >= item().stock"
        class="w-7 h-7 flex items-center justify-center bg-white rounded-md shadow-sm disabled:opacity-30 disabled:cursor-not-allowed active:scale-90 transition-all text-slate-600 font-bold"
      >
        +
      </button>
    </div>
  </div>

  <button
    (click)="onRemoveItem(item().id)"
    class="ml-2 p-2 text-slate-300 hover:text-red-500 transition-colors cursor-pointer group"
    title="Eliminar producto"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="h-5 w-5"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
      />
    </svg>
  </button>
</div>
